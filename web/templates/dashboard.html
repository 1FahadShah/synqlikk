{% extends 'base.html' %} {% block content %}
<h2 class="mt-4 text-center">Dashboard</h2>

<!-- ======= Tasks ======= -->
<h4 class="mt-5">Tasks</h4>
<form method="POST" action="{{ url_for('main_bp.add_task') }}" class="row g-2">
  <div class="col-md-3">
    <input
      type="text"
      name="title"
      class="form-control"
      placeholder="Task title"
      required
    />
  </div>
  <div class="col-md-3">
    <input
      type="text"
      name="description"
      class="form-control"
      placeholder="Description"
    />
  </div>
  <div class="col-md-2">
    <input type="date" name="due_date" class="form-control" />
  </div>
  <div class="col-md-2">
    <select name="priority" class="form-select">
      <option value="1">High</option>
      <option value="2" selected>Medium</option>
      <option value="3">Low</option>
    </select>
  </div>
  <div class="col-md-2">
    <button type="submit" class="btn btn-primary w-100">Add Task</button>
  </div>
</form>

<table class="table table-striped mt-3">
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Due</th>
      <th>Priority</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
    <tr>
      <td>{{ task.title }}</td>
      <td>{{ task.description }}</td>
      <td>{{ task.due_date }}</td>
      <td>{{ task.priority }}</td>
      <td>{{ task.status }}</td>
      <td>
        <form
          method="POST"
          action="{{ url_for('main_bp.remove_task', task_id=task.id) }}"
          style="display: inline"
        >
          <button type="submit" class="btn btn-danger btn-sm">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- ======= Notes ======= -->
<h4 class="mt-5">Notes</h4>
<form
  method="POST"
  action="{{ url_for('main_bp.add_note') }}"
  class="input-group mb-3"
>
  <input
    type="text"
    name="content"
    class="form-control"
    placeholder="Add note..."
    required
  />
  <button type="submit" class="btn btn-primary">Add Note</button>
</form>
<ul class="list-group">
  {% for note in notes %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    {{ note.content }}
    <form
      method="POST"
      action="{{ url_for('main_bp.remove_note', note_id=note.id) }}"
      style="display: inline"
    >
      <button type="submit" class="btn btn-danger btn-sm">Delete</button>
    </form>
  </li>
  {% endfor %}
</ul>

<!-- ======= Expenses ======= -->
<h4 class="mt-5">Expenses</h4>
<form
  method="POST"
  action="{{ url_for('main_bp.add_expense') }}"
  class="row g-2 mb-3"
>
  <div class="col-md-2">
    <input
      type="number"
      step="0.01"
      name="amount"
      class="form-control"
      placeholder="Amount"
      required
    />
  </div>
  <div class="col-md-3">
    <input
      type="text"
      name="category"
      class="form-control"
      placeholder="Category"
      required
    />
  </div>
  <div class="col-md-3">
    <input
      type="text"
      name="description"
      class="form-control"
      placeholder="Description"
    />
  </div>
  <div class="col-md-2">
    <input type="date" name="date" class="form-control" required />
  </div>
  <div class="col-md-2">
    <button type="submit" class="btn btn-primary w-100">Add Expense</button>
  </div>
</form>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Amount</th>
      <th>Category</th>
      <th>Description</th>
      <th>Date</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for exp in expenses %}
    <tr>
      <td>{{ exp.amount }}</td>
      <td>{{ exp.category }}</td>
      <td>{{ exp.description }}</td>
      <td>{{ exp.date }}</td>
      <td>
        <form
          method="POST"
          action="{{ url_for('main_bp.remove_expense', expense_id=exp.id) }}"
          style="display: inline"
        >
          <button type="submit" class="btn btn-danger btn-sm">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
